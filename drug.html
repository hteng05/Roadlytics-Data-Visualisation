<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Madimi+One&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Angkor&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" />
    <link rel="stylesheet" href="css/drug.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/base.css">
    <title>Drug Testing Analysis - Roadlytics</title>
</head>
<body class="body">
    <script src="js/header.js"></script>
    
    <div class="drug-hero">
        <div class="drug-hero-overlay"></div>
        <div class="drug-hero-content">
            <h1>DRUG TESTING ON AUSTRALIAN ROADS</h1>
            <p class="hero-tagline">1 in 6 drivers test positive. Are you at risk?</p>
        </div>
    </div>
    
    <main class="drug-container">
        <div class="intro-section" data-aos="fade-up">
            <div class="road-safety-intro">
                <i class="fas fa-exclamation-triangle safety-icon"></i>
                <p>Drug use while driving poses a serious risk to road safety. Impaired drivers have slower reaction times, reduced coordination, and impaired judgment, increasing the likelihood of crashes. Roadside drug testing is a key enforcement strategy used across Australia to detect and deter drug-impaired driving and to support broader efforts in reducing traffic-related harm.</p>
            </div>

            <div class="choropleth-intro" data-aos="fade-up" data-aos-delay="100">
                <h2 class="section-title">Testing Across Australia</h2>
                <p>This map shows the total number of roadside drug tests conducted across Australian states and territories from 2008 to 2023.</p>
                <p>Use the slider at the top to select a year - when selected, the map updates to display test counts for that year, with each region shaded according to the number of tests conducted. The colour scale below indicates the range of values represented.</p>
                <p id="intro-text">Hover over a region to view the number of tests conducted in that region in that year. Click on a region to view other charts that show the number of positive drug tests and testing trends over time for the corresponding region. Use the zoom controls to zoom in and out of the map.</p>
            </div>

            <div class="map-section" data-aos="zoom-in">
                <div id="choropleth" class="responsive-svg-container"></div>
                <div id="tooltip-linechart" class="tooltip-linechart"></div>
            </div>

            <!-- New container for jurisdiction-specific content -->
            <div id="jurisdiction-details" class="jurisdiction-details" style="display: none;">
                <div class="jurisdiction-header">
                    <h2 id="selected-jurisdiction">Selected Jurisdiction</h2>
                    <button id="show-all-data" class="modern-button">
                        <span>Show All Data</span>
                        <i class="fas fa-globe"></i>
                    </button>
                </div>
                
                <div id="drug-filters" class="filters">
                    <div class="filter-group">
                        <label for="year-filter">Year:</label>
                        <select id="year-filter" class="drug-dropdown-filter"></select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="age-filter">Age Group:</label>
                        <select id="age-filter" class="drug-dropdown-filter"></select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="location-filter">Location:</label>
                        <select id="location-filter" class="drug-dropdown-filter"></select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="jurisdiction-filter">Jurisdiction:</label>
                        <select id="jurisdiction-filter" class="drug-dropdown-filter"></select>
                    </div>
                </div>
                
                <div class="chart-section" data-aos="fade-up">
                    <h3 class="chart-title">Positive Drug Tests by Region</h3>
                    <div class="choropleth-intro" style="margin: 0 0 18px 0;">
                        <p>This bar chart shows the total number of positive roadside drug tests conducted across Australia from 2008 to 2023. It highlights year-on-year changes in detection outcomes, reflecting evolving enforcement practices and testing volumes.</p>    
                        <p id="intro-text">Click a bar to filter other charts, or use the filters above to explore the data. Click on the background to reset the filters.</p>
                    </div>
                    <div class="chart-scroll-container">
                        <div id="positive-drug-bar-chart" class="responsive-svg-container"></div>
                    </div>
                </div>

                <div class="chart-section" data-aos="fade-up" data-aos-delay="100">
                    <h3 class="chart-title">Testing Trends Over Time</h3>
                    <div class="choropleth-intro" style="margin: 0 0 18px 0;">
                        <p>This line chart illustrates the annual number of roadside drug tests conducted all over Australia, alongside the number of positive results. The blue line shows the total number of tests conducted each year, while the shaded area underneath illustrates the number of positive results - highlighting the gap between testing volume and actual drug detections over time.</p>   
                        <p id="missing-data">Missing data: 2023 Northern Territory data is unavailable due to significant data quality issues.</p>
                        <p id="missing-data">The age group filter is not available for the drug related data.</p>
                        <p id="missing-data">If data for Total Tests is lower than the number of Positive Tests, the data for Total Tests is not available for that year.</p>
                        <p id="intro-text">Hover over to view the number of positive tests and the total tests for that year. Click on a line to filter other charts, or use the filters above to explore the data. Click on the background to reset the filters.</p>
                    </div>
                    <div class="chart-scroll-container">
                        <div id="jurisdiction-line-chart" class="responsive-svg-container"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Place the View Data button below all charts, left-aligned -->
        <div class="view-data-btn-container">
            <a href="viewdata.html" class="view-data-btn">View data</a>
        </div>
    </main>
    
    <footer class="footer">
        <p>Â© 2025 Roadlytics - Driving Change Through Data</p>
    </footer>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 800,
            once: true
        });
    </script>
    <script src="js/load-data.js"></script>
    <script src="js/shared-constants.js"></script>
    <script src="js/interactions.js"></script>
    <script>window.renderHeader();</script>
    <script src="js/drug/choropleth.js"></script>
    <script src="js/drug/line.js"></script>
    <script src="js/drug/bar.js"></script>
</body>
</html>